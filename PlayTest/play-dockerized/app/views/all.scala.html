@*
* This template takes a single argument, a String containing a
* message to display.
*@
@(pins: List[Pin], board: String)
@*//@(newPin: String)*@
@*
* Call the `main` template with two arguments. The first
* argument is a `String` with the title of the page, the second
* argument is an `Html` object containing the body of the page.
*@

@pageLayout(board) {
    <div id="wrapper">
        <div id="response"></div>
        <div class="card-columns">
            @for(pin <- pins) {
                @card1(pin)
            }
        </div>
        <div>
            <textarea class="form-control" id="display-pin" rows="30" disabled></textarea>
        </div>
    </div>
}


<script>
        var socket = null
        function subscribe(channel) {
            var subscribeUrl = "/socket" + "?channel=" + channel
            console.log("Subscribed to: " + subscribeUrl)
            socket = new WebSocket("ws://" + window.location.host + subscribeUrl)
            socket.onmessage = function(event) {
                console.log(" Received " + event.data);
//
                var pin = JSON.parse(event.data);
                var pinHtml = "<div class=\"grid-item\">" +
                "    <h3>" + pin.title + "<\/h3>" +
                "    <img class=\"\" src=\" " + pin.url + "\" alt=\"Card image\">" +
                "    <span class=\"\">" +
                "        <p class=\"\">"+ pin.description+ "<\/p>" +
                "    <\/span>" +
                "<\/div>";
//
                $(".card-columns").first().prepend(pinHtml);
//                $("#messages" ).prepend("<div>" + event.data + "</div>")
            }
            socket.onclose = function(event) {
                console.log(event)
            }
        }

        $(document).ready(function(){
            var channel = $(".section-heading").html()
            subscribe(channel)
        })

//        function webSocketImageDisplay(){
//
//
//
//            webSocketReceive.listen(function (message) {
//                console.log(" Received " + message);
//
//                var pin = JSON.parse(message);
//                var pinHtml = "<div class=\"grid-item\">" +
//                "    <h3>" + pin.title + "<\/h3>" +
//                "    <img class=\"\" src=\" " + pin.url + "\" alt=\"Card image\">" +
//                "    <span class=\"\">" +
//                "        <p class=\"\">"+ pin.description+ "<\/p>" +
//                "    <\/span>" +
//                "<\/div>";
//
//                $(".card-columns").first().prepend(pinHtml);
//            });
//        }
//
//        $(document).ready(function(){
//            webSocketImageDisplay()
//        });
</script>